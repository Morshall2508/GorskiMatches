<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>
<div class="bigiPadForChallengeHistory">
    <div class="navigationBar">
        <div id="homeButton">Home</div>
        <div id="accountPage">Account</div>
    </div>
    <div id="indexPadForChallengeHistory">
        <div id="table2"></div>
        <div id="tableUuidTime"></div>
    </div>
</div>

<script>

    fetch(`/api/challenge/challenges`)

        .then(res => {
            if (res.ok) {
                return res.json()
            }
            {
                throw "Not found";
            }
        })
        .then(json => {

            let html = "";
            html += `<div class = "topBarFirst"> Date and Time</div>
                <div class = "topBarSecond"> Result </div>`

            json.forEach(item => {
                let result = Boolean(item.registeredUserScore > item.nonRegisteredUserScore);
                if (item.nonRegisteredUserTimeSeconds === 0 && item.registeredUserTimeSeconds === 0) {
                    html += `
                <div class = "challengeHistoryElement">${new Date(item.time).toLocaleString()}</div>
                <div class = "challengeHistoryElement"></div>`
                } else {
                    html += `
                <div class = "challengeHistoryElement"style = background-color:${result ? "#54af54" : "#d54545"}> ${new Date(item.time).toLocaleString()}</div>
                <div class = "challengeHistoryElement"style = background-color:${result ? "#54af54" : "#d54545"}> ${result ? "Won" : "Lost"}</div>`
                }
                document.getElementById("tableUuidTime").innerHTML = html;
            })
        })
</script>

<script>
    document.getElementById("accountPage").onclick = () => {
        window.location.replace("/account.html?")
    };
</script>
<script>
    document.getElementById("homeButton").onclick = () => {
        window.location.replace("/")
    };
</script>
</body>
</html>